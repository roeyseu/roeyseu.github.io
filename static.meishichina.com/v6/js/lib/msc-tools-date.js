(function(a){var b=a.register("msc.tools.date");b.format=function(f,d){var c,e;if(!f){return"";}if(d){if(!(d instanceof Date)){d=new Date(parseInt(d,10));}}else{d=new Date();}c={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours()%12==0?12:d.getHours()%12,"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds()};if(/(y+)/i.test(f)){f=f.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length));}for(e in c){if(new RegExp("("+e+")").test(f)){f=f.replace(RegExp.$1,(RegExp.$1.length==1)?(c[e]):(("00"+c[e]).substr((""+c[e]).length)));}}return f;};b.elapsed=function(f,g){var d=Math.round((new Date-f)/1000),c;if(d<10){c="刚刚";}else{if(d<60){c=Math.round(d)+"秒前";}else{if(d<3600){c=Math.round(d/60)+"分钟前";}else{if(d<86400){c=Math.round(d/3600)+"小时前";}else{c=g?b.format("yyyy-MM-dd",f):b.format("yyyy-MM-dd HH:mm",f);}}}}return c;};}(msc));